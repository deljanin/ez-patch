"use client";
import { H2, H3 } from "@/components/Headings";
import { useMessages, useTranslations } from "next-intl";

function Testimonials() {
  const t = useTranslations("HomePage.Testimonials");
  const messages = useMessages();

  const testimonialKeys = Object.keys(messages.HomePage.Testimonials).filter(
    (key) => key !== "Title" && key !== "Subtitle",
  );

  const testimonialElements = testimonialKeys.map((testimonial, index) => (
    <div
      key={index}
      className="group relative flex h-[250px] w-full flex-shrink-0 flex-col items-center gap-4 rounded-3xl bg-white shadow-[0_0_20px_0_rgba(0,0,0,0.25)] select-none md:w-[400px]"
    >
      <div className="flex h-full flex-col gap-4 px-6 pt-8">
        <H3 styles="text-red-main">{t(`${testimonial}.Name`)}</H3>
        <p className="line-clamp-6 font-extralight">
          {t(`${testimonial}.Text`)}
        </p>
      </div>
      <svg
        width="50"
        height="53"
        viewBox="0 0 59 53"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute -top-5 right-5"
      >
        <path
          d="M40.5625 53C38.6065 53 36.7307 52.2024 35.3476 50.7827C33.9645 49.3629 33.1875 47.4373 33.1875 45.4295L33.1875 22.718C33.1875 10.8702 39.2719 3.06127 50.7289 0.120136C51.2 -0.00466987 51.6904 -0.0325743 52.172 0.0380396C52.6536 0.10865 53.1168 0.276382 53.5349 0.531562C53.9531 0.786739 54.3179 1.12433 54.6084 1.52488C54.8989 1.92543 55.1093 2.38102 55.2275 2.86541C55.3457 3.3498 55.3694 3.85342 55.2972 4.34724C55.225 4.84107 55.0583 5.31535 54.8067 5.74275C54.5551 6.17015 54.2236 6.54223 53.8314 6.83756C53.4391 7.13289 52.9938 7.34561 52.5211 7.4635C44.309 9.57188 40.5625 14.3791 40.5625 22.718L40.5625 26.5033L51.625 26.5033C53.4856 26.5027 55.2777 27.224 56.642 28.5227C58.0063 29.8214 58.842 31.6014 58.9816 33.506L59 34.0738L59 45.4295C59 47.4373 58.223 49.3629 56.8399 50.7827C55.4568 52.2024 53.581 53 51.625 53L40.5625 53ZM7.375 53C5.41903 53 3.54317 52.2024 2.16009 50.7827C0.777008 49.3629 -3.32839e-06 47.4373 -3.15286e-06 45.4295L-1.16736e-06 22.718C-1.31595e-07 10.8702 6.08438 3.06127 17.5414 0.120133C18.0125 -0.00467277 18.5029 -0.0325772 18.9845 0.0380367C19.4661 0.108647 19.9293 0.276379 20.3474 0.531559C20.7656 0.786736 21.1304 1.12433 21.4209 1.52488C21.7114 1.92543 21.9218 2.38102 22.04 2.86541C22.1582 3.3498 22.1819 3.85341 22.1097 4.34724C22.0374 4.84107 21.8708 5.31534 21.6192 5.74274C21.3676 6.17015 21.0361 6.54223 20.6439 6.83756C20.2516 7.13289 19.8063 7.34561 19.3336 7.4635C11.1215 9.57188 7.375 14.3791 7.375 22.718L7.375 26.5033L18.4375 26.5033C20.2981 26.5027 22.0902 27.224 23.4545 28.5227C24.8188 29.8214 25.6545 31.6014 25.7941 33.506L25.8125 34.0738L25.8125 45.4295C25.8125 47.4373 25.0355 49.3629 23.6524 50.7827C22.2693 52.2024 20.3935 53 18.4375 53L7.375 53Z"
          fill="#E52427"
        />
      </svg>
    </div>
  ));

  return (
    <div className="flex min-h-[50vh] w-full flex-col items-center justify-center gap-5 px-5 sm:pl-16 md:flex-row md:pr-0 lg:pl-32 xl:pl-48">
      <div className="flex shrink-0 flex-col justify-center gap-6">
        <H2 styles="whitespace-pre-line">
          {t.rich("Title", {
            underline: (chunks) => <u>{chunks}</u>,
          })}
        </H2>
        <div className="flex items-center gap-4">
          <GoogleIcon />
          <p className="w-[75%] font-extralight">{t("Subtitle")}</p>
        </div>
      </div>

      {/* Sliding Testimonials */}
      <div className="relative w-full overflow-hidden p-5" aria-hidden="true">
        <div className="from-white-main absolute top-0 left-0 z-10 h-full w-[50px] bg-gradient-to-r to-transparent" />
        <div className="from-white-main absolute top-0 right-0 z-10 h-full w-[50px] bg-gradient-to-l to-transparent" />
        <div className="track flex w-max justify-evenly gap-10">
          {[...testimonialElements, ...testimonialElements].map((item, i) => (
            <div key={i}>{item}</div>
          ))}
        </div>

        <style jsx>{`
          .track {
            animation: scroll-marquee linear infinite;
            animation-duration: ${testimonialElements.length * 6}s;
          }
          .track:hover {
            animation-play-state: paused;
          }

          @keyframes scroll-marquee {
            to {
              transform: translateX(calc(-50% - 20px));
            }
          }
        `}</style>
      </div>
    </div>
  );
}

export default Testimonials;

const GoogleIcon = () => (
  <svg
    width="45"
    height="46"
    viewBox="0 0 45 46"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M15.452 1.29828C10.8098 2.9087 6.80635 5.96533 4.02974 10.0192C1.25313 14.0731 -0.150314 18.9105 0.025552 23.8209C0.201418 28.7314 1.94733 33.456 5.00683 37.3009C8.06633 41.1457 12.2782 43.9081 17.0237 45.1823C20.871 46.1751 24.9018 46.2187 28.7696 45.3094C32.2735 44.5223 35.513 42.8388 38.1708 40.4237C40.937 37.8333 42.9448 34.5379 43.9784 30.8919C45.1019 26.927 45.3018 22.7573 44.5628 18.7031H22.9584V27.665H35.4702C35.2202 29.0944 34.6843 30.4586 33.8947 31.676C33.1051 32.8935 32.078 33.9391 30.8749 34.7503C29.3471 35.761 27.6248 36.441 25.8186 36.7467C24.0072 37.0835 22.1491 37.0835 20.3377 36.7467C18.5017 36.3671 16.7649 35.6094 15.2378 34.5217C12.7846 32.7851 10.9426 30.3181 9.97463 27.4726C8.99028 24.5739 8.99028 21.4312 9.97463 18.5325C10.6637 16.5006 11.8027 14.6506 13.3068 13.1205C15.028 11.3373 17.2071 10.0627 19.605 9.43652C22.0029 8.81031 24.527 8.85668 26.9003 9.57055C28.7543 10.1397 30.4497 11.134 31.8513 12.4744C33.2621 11.0709 34.6705 9.66371 36.0764 8.25294C36.8023 7.49431 37.5936 6.77199 38.3087 5.99521C36.1692 4.00419 33.6578 2.45493 30.9185 1.43621C25.9301 -0.37509 20.4719 -0.423767 15.452 1.29828Z"
      fill="white"
    />
    <path
      d="M15.452 1.29828C20.4715 -0.424938 25.9297 -0.377542 30.9185 1.43258C33.6583 2.45822 36.1685 4.01494 38.3051 6.01336C37.5791 6.79013 36.8132 7.51609 36.0728 8.27108C34.6644 9.67702 33.2573 11.0781 31.8513 12.4744C30.4497 11.134 28.7543 10.1397 26.9003 9.57055C24.5278 8.85418 22.0038 8.80513 19.6052 9.42878C17.2067 10.0524 15.0262 11.3247 13.3031 13.106C11.7991 14.636 10.66 16.4861 9.971 18.518L2.44646 12.6922C5.13979 7.35116 9.80312 3.2657 15.452 1.29828Z"
      fill="#E33629"
    />
    <path
      d="M0.450083 18.4635C0.854517 16.4591 1.52596 14.518 2.44646 12.6922L9.971 18.5325C8.98666 21.4312 8.98666 24.5739 9.971 27.4726C7.46403 29.4085 4.95585 31.3541 2.44646 33.3093C0.142098 28.7224 -0.560693 23.4962 0.450083 18.4635Z"
      fill="#F8BD00"
    />
    <path
      d="M22.9584 18.6994H44.5628C45.3018 22.7537 45.1019 26.9233 43.9784 30.8883C42.9448 34.5343 40.937 37.8296 38.1708 40.4201C35.7424 38.5253 33.3032 36.6451 30.8749 34.7503C32.0788 33.9383 33.1064 32.8915 33.896 31.6728C34.6856 30.454 35.2211 29.0884 35.4702 27.6577H22.9584C22.9547 24.6741 22.9584 21.6868 22.9584 18.6994Z"
      fill="#587DBD"
    />
    <path
      d="M2.44283 33.3093C4.95222 31.3734 7.4604 29.4279 9.96737 27.4726C10.9373 30.3191 12.7819 32.7862 15.2378 34.5217C16.7696 35.6043 18.5102 36.3559 20.3485 36.7286C22.16 37.0654 24.018 37.0654 25.8295 36.7286C27.6357 36.4228 29.358 35.7428 30.8858 34.7322C33.3141 36.6269 35.7533 38.5072 38.1817 40.4019C35.5243 42.8183 32.2848 44.5031 28.7805 45.2912C24.9127 46.2005 20.8818 46.1569 17.0346 45.1642C13.9917 44.3517 11.1495 42.9195 8.68606 40.9573C6.07864 38.8872 3.94903 36.2784 2.44283 33.3093Z"
      fill="#319F43"
    />
  </svg>
);
